# 数据库设计报告

## 一、数据库概述

本项目数据库名称为 `shop`，用于支撑一个多用户的电商平台，涵盖买家、卖家、商品、购物车、订单、管理员等核心业务模块。数据库采用 MySQL 8.0，字符集为 utf8mb4。

---

## 二、表结构设计

### 1. 管理员表（admin）

| 字段名    | 类型         | 说明         | 约束         |
|-----------|--------------|--------------|--------------|
| id        | varchar(64)  | 管理员ID     | 主键         |
| name      | varchar(64)  | 用户名       | 非空         |
| password  | varchar(128) | 密码         | 非空         |
| is_bool   | tinyint(1)   | 逻辑删除标志 | 默认1        |

**用途**：存储平台管理员账号信息。

---

### 2. 买家表（buyer）

| 字段名        | 类型         | 说明         | 约束         |
|---------------|--------------|--------------|--------------|
| buyer_id      | varchar(64)  | 买家ID       | 主键         |
| buyer_name    | varchar(64)  | 买家用户名   | 唯一，非空   |
| buyer_password| varchar(128) | 买家密码     | 非空         |
| is_bool       | tinyint(1)   | 逻辑删除标志 | 默认1        |

**用途**：存储买家用户信息。

---

### 3. 卖家表（seller）

| 字段名         | 类型         | 说明         | 约束         |
|----------------|--------------|--------------|--------------|
| seller_id      | varchar(64)  | 卖家ID       | 主键         |
| seller_name    | varchar(64)  | 卖家用户名   | 唯一，非空   |
| seller_password| varchar(128) | 卖家密码     | 非空         |
| is_bool        | tinyint(1)   | 逻辑删除标志 | 默认1        |

**用途**：存储卖家用户信息。

---

### 4. 商品表（goods）

| 字段名    | 类型         | 说明         | 约束         |
|-----------|--------------|--------------|--------------|
| goods_id  | varchar(64)  | 商品ID       | 主键         |
| goods_name| varchar(255) | 商品名称     | 非空         |
| seller_id | varchar(64)  | 卖家ID       | 外键         |
| type      | varchar(64)  | 商品类型     | 可空         |
| price     | double       | 单价         | 非负         |
| num       | int          | 库存数量     | 非负         |
| images    | json         | 商品图片     | 可空         |
| is_bool   | tinyint(1)   | 逻辑删除标志 | 默认1        |

**用途**：存储商品信息，关联卖家。

---

### 5. 购物车表（cart）

| 字段名   | 类型         | 说明         | 约束         |
|----------|--------------|--------------|--------------|
| buyer_id | varchar(64)  | 买家ID       | 主键，外键   |
| goods_id | varchar(64)  | 商品ID       | 主键，外键   |
| num      | int          | 购买数量     | 非负         |
| is_bool  | tinyint(1)   | 逻辑删除标志 | 默认1        |

**用途**：存储买家购物车中的商品及数量。

---

### 6. 订单表（order）

| 字段名   | 类型         | 说明         | 约束         |
|----------|--------------|--------------|--------------|
| order_id | varchar(32)  | 订单ID       | 主键         |
| buyer_id | varchar(64)  | 买家ID       | 外键         |
| seller_id| varchar(64)  | 卖家ID       | 外键         |
| goods_id | varchar(64)  | 商品ID       | 外键         |
| state    | varchar(32)  | 订单状态     | 可空         |
| num      | int          | 购买数量     | 非负         |
| sum      | double       | 总价         | 非负         |
| time     | datetime     | 下单时间     | 可空         |
| is_bool  | tinyint(1)   | 逻辑删除标志 | 默认1        |

**用途**：存储订单信息，关联买家、卖家、商品。

---

## 三、表关系说明

- **买家（buyer）与购物车（cart）、订单（order）**：一对多（一个买家可有多个购物车项和订单）。
- **卖家（seller）与商品（goods）、订单（order）**：一对多（一个卖家可有多个商品和订单）。
- **商品（goods）与购物车（cart）、订单（order）**：一对多（一个商品可被多个购物车项和订单引用）。
- **订单（order）**：通过外键关联买家、卖家、商品。

---

## 四、设计特点与说明

- 所有主表均有 `is_bool` 字段用于逻辑删除，便于数据恢复和审计。
- 商品图片采用 JSON 存储，可支持多图。
- 订单表设计为一条记录对应一个商品的购买，便于统计和管理。
- 购物车采用联合主键（buyer_id, goods_id），防止重复添加同一商品。

---

## 五、ER 图（简化版）

```
Buyer 1---* Cart *---1 Goods
Buyer 1---* Order *---1 Goods
Seller 1---* Goods
Seller 1---* Order
Admin（独立）
``` 